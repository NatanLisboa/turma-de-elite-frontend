<div fxLayout="column" fxLayoutAlign="center start">
  <div class="page-title" fxFlexAlign="start" fxLayoutAlign="center start">
    <button mat-icon-button routerLink="/manager/dashboard"><mat-icon>navigate_before</mat-icon></button>
    <h1 class="mat-display-1">{{'labels.teachers'|translate}}</h1>
  </div>
  <div class="full-width" fxLayout="row" fxLayoutAlign="space-around  start">
    <div fxFlex="45">
      <mat-form-field class="full-width" appearance="outline">
        <form [formGroup] = "teacherForm">
          <input type="tel" matInput placeholder="{{'placeholder.searchTeacher'| translate}}" [formControl]="searchControl" [matAutocomplete]="auto" formControlName="name">
          <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayTeacherName">
            <mat-option *ngFor="let teacher of filteredTeachers$ | async" [value]="teacher">
              {{teacher.name}}
            </mat-option>
          </mat-autocomplete>
        </form>
        <mat-icon matSuffix>search</mat-icon>
      </mat-form-field>
      <mat-tab-group (selectedTabChange)="loadTeachers($event.index)">
        <mat-tab label="Turma de Elite">
            <a
            data-cy-teacher="create"
            [ngClass]="'mat-elevation-z1 '+  (createMode?'toggled-tile':'tile')"
            fxLayout="row"
            fxFlexAlign="center center"
            fxLayoutAlign="start center"
            (click)="createMode=true;teacherToggleId=null;isFromLms=false">
            <mat-icon color="primary">add</mat-icon>
            <p color="primary">{{'labels.createTeacher'|translate}}</p>
          </a>
          <div *ngIf="isLoading" fxLayout="row" fxLayoutAlign="center center">
            <mat-spinner></mat-spinner>
          </div>
          <a
            [attr.data-cy-edit-teacher]="teacher.id"
            [ngClass]="'mat-elevation-z1 ' + (teacherToggleId===teacher.id?'toggled-tile':'tile')"
            fxLayout="row"
            fxFlexAlign="center center"
            fxLayoutAlign="start center"
            *ngFor="let teacher of localTeachers"
            (click)="teacherToggleId=teacher.id;createMode=false;isFromLms=false;">
            <mat-icon [ngClass]="teacher.isActive?'primary':'disabled'">person</mat-icon>
            <p color="primary">{{teacher.name}}</p>
          </a>
          <mat-paginator
            class="full-width"
            [length]="totalLength"
            [pageSize]="pageSize"
            [pageSizeOptions]="[5, 10, 25, 100]"
            (page)="pageChange($event)">
          </mat-paginator>
        </mat-tab>
        <mat-tab label="Google Classroom">
          <a
            [attr.data-cy-edit-teacher]="teacher.id"
            [ngClass]="'mat-elevation-z1 ' + (teacherToggleId===teacher.externalId?'toggled-tile':'tile')"
            fxLayout="row"
            fxFlexAlign="center center"
            fxLayoutAlign="start center"
            *ngFor="let teacher of lmsTeachers"
            (click)="teacherToggleId=teacher.externalId;createMode=false;isFromLms=teacher.isFromLms">
            <mat-icon [ngClass]="teacher.isActive?'primary':'disabled'">person</mat-icon>
            <p color="primary">{{teacher.name}}</p>
          </a>
          <mat-paginator
            class="full-width"
            [length]="totalLength"
            [pageSize]="pageSize"
            [pageSizeOptions]="[5, 10, 25, 100]"
            (page)="pageChange($event)">
          </mat-paginator>
        </mat-tab>
     </mat-tab-group>      
    </div>
    <div fxFlex="45" fxFlexAlign="start">
      <app-teacher-form
        *ngIf="teacherToggleId || createMode"
        [teacherId]="teacherToggleId"
        [isFromLms]="isFromLms"
        [createMode]="createMode"
        (save)="refresh()">
      </app-teacher-form>
    </div>
  </div>
</div>
